# vim: filetype=sh

##############################################################################
# KEY BINDINGS
##############################################################################

# remap prefix to ctrl + q
unbind C-b
set-option -g prefix C-q
bind-key C-q send-prefix

# split panes using \ and -
bind \ split-window -h -c '#{pane_current_path}'
bind - split-window -v -c '#{pane_current_path}'
unbind '"'
unbind %

bind A command-prompt "rename-window %%"

# quick reload config file
bind r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

# smart pane switching with awareness of vim splits
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

##############################################################################
# UI
##############################################################################

set -g default-terminal "xterm-256color"

# panes
set -g pane-border-fg default
set -g pane-active-border-fg brightred

# status line
set -g status-justify left
set -g status-bg cyan
set -g window-status-current-attr bold
set -g status-interval 60
set -g status-position top

# status line middle but align left
set-window-option -g window-status-format '** #[fg=black] #I:#W#F [#[fg=black]#{pane_current_command}]'
set-window-option -g window-status-current-format '** #[bg=black, fg=cyan] #I:#W#F [#{pane_current_command}]'

# status line left
set -g status-left ""

# status line right
# show path and current time
set-option -g status-right-length 50
set -g status-right-justify right
set -g status-right-fg black
set -g status-right '#(pwd="#{pane_current_path}"; printf ${pwd} | tail -c 30) #[fg=black]%r'

##############################################################################
# BEHAVIORS
##############################################################################

# enable mouse control
set -g mouse on

set -s escape-time 0

setw -g mode-keys vi

# set starting indices to 1, easier to reach on keyboard
set -g base-index 1
setw -g pane-base-index 1

# automatically renumbers the windows
set-option -g renumber-windows on

# for mac sierra stuff like copy and paste to work
set -g default-command "reattach-to-user-namespace -l ${SHELL}"

##############################################################################
# PLUGINS
##############################################################################

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

set -g @continuum-boot 'on'
set -g @continuum-boot-options 'iterm'
set -g @continuum-restore 'on'

# IMPORTANT: KEEP THIS AT THE VERY BOTTOM
run '~/.tmux/plugins/tpm/tpm'
